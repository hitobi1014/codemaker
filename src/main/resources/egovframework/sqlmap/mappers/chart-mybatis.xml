<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.codemaker.admin.chart.dao.ChartMapper">

<select id="selectLessonPay" parameterType="kr.co.codemaker.common.vo.PageVo" resultType="kr.co.codemaker.admin.chart.vo.PayVO">
	SELECT *
		FROM
		(SELECT ROWNUM AS rn, a.*
		FROM(
		    SELECT a.pay_id, a.pay_sum, a.pay_date, b.les_id, b.les_nm, b.les_cont 
		    FROM pay A, lesson B
            WHERE a.les_id = b.les_id
		    ORDER BY a.pay_date DESC)a)
	WHERE rn BETWEEN (#{page} -1) * #{pageSize} + 1 AND #{page} * #{pageSize}
</select>
<select id="selectTotalCnt"  parameterType="kr.co.codemaker.common.vo.PageVo" resultType="int">
	SELECT COUNT(*) FROM PAY
</select>

<select id="lessonPayExcel" resultType="kr.co.codemaker.admin.chart.vo.PayVO" parameterType="byte">
	SELECT a.pay_id, a.pay_sum, a.pay_date, b.les_id, b.les_nm  
	FROM pay A, LESSON b
	WHERE a.les_id = b.les_id
	ORDER BY a.pay_date DESC
</select>

</mapper>