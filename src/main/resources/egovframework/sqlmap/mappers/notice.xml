<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="notice">
	
	<select id="noticeTotalCnt" resultType="int">
		select count(*) from notice
	</select>
	

	<select id="selectAllNotice" parameterType="java.util.Map" resultType="NoticeVO">
			
			
	SELECT * FROM 
	(SELECT ROWNUM AS RN,
	       A.*
	  FROM (SELECT *
			FROM NOTICE
			WHERE 1=1
			<include refid="search"></include>) A)
	 WHERE RN BETWEEN (#{page} - 1) * #{pageSize} + 1 AND #{page} * #{pageSize}
	</select>

<sql id="search">
	<if test="searchOption != null and searchOption != ''">
		<choose>
	        <when test="searchOption == 1">
	        	AND NOTICE_HEAD = 1
				AND	NOTICE_ID LIKE '%' || #{keyWord} || '%'
				AND	NOTICE_TITLE LIKE '%' || #{keyWord} || '%'
			</when>
	        <when test="searchOption == 2">
	        	AND NOTICE_HEAD = 2
				AND	NOTICE_ID LIKE '%' || #{keyWord} || '%'
				AND	NOTICE_TITLE LIKE '%' || #{keyWord} || '%'
			</when>
	        <when test="searchOption == 3">
	        	AND NOTICE_HEAD = 3
				AND	NOTICE_ID LIKE '%' || #{keyWord} || '%'
				AND	NOTICE_TITLE LIKE '%' || #{keyWord} || '%'
			</when>
		</choose>
	</if>
</sql>

	<select id="selectNotice" parameterType="String" resultType="NoticeVO">
		select * from notice where notice_id = #{notice_id}
	</select>
	
	<insert id="insertNotice" parameterType="NoticeVO">
		insert into notice values (#{notice_id}, #{notice_title}, #{notice_cont}, sysdate, 'N', #{notice_head}, #{admin_id})
	</insert>
	
	<update id="updateNotice" parameterType="NoticeVO">
		update notice set notice_title = #{notice_title}, notice_cont = #{notice_cont}, notice_head = #{notice_head} where notice_id = #{notice_id}
	</update>
	
	<delete id="deleteNotice" parameterType="String">
		update notice set notice_out = 'Y' where notice_id = #{notice_id}
	</delete>

</mapper>